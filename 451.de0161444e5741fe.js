"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[451],{2451:(H,d,n)=>{n.r(d),n.d(d,{HomeModule:()=>l});var p=n(6895),c=n(343),e=n(8256),m=n(752),h=n(2637),g=n(6171);function u(s,t){1&s&&(e.TgZ(0,"div",7),e._uU(1," Loading ...\n"),e.qZA())}function f(s,t){1&s&&(e.TgZ(0,"div",8)(1,"p"),e._uU(2," Oops, it looks like there are no posts to show at the moment. Don't worry though, you can always follow more people to see more posts! Click the button below to discover people you might know. "),e.qZA(),e.TgZ(3,"button",9),e._uU(4," Discover People "),e.qZA()())}function P(s,t){if(1&s){const o=e.EpF();e.TgZ(0,"app-posts",10),e.NdJ("deletePostReq",function(y){e.CHM(o);const D=e.oxw();return e.KtG(D.getDeleteReq(y))}),e.qZA()}if(2&s){const o=t.$implicit,r=e.oxw();e.Q6J("post",o)("themeColor",r.themeColor)("isDeletePostLoading",r.isDeletePostLoading)}}class a{constructor(t,o){this._postService=t,this._color=o,this.posts=[],this.isDeletePostLoading=!1,this.isPostsLoaded=!1,this.errorMSG="",this.userId=localStorage.getItem("id"),this.themeColor="light"}ngOnInit(){this._postService.getFriendsPosts(this.userId).subscribe({next:t=>{this.posts=this.sortPosts(t.posts),this.isPostsLoaded=!0},error:t=>{console.warn(t.statusText)}}),this._color.themeColor$.subscribe(t=>this.themeColor=t)}sortPosts(t){return t.sort((o,r)=>Date.parse(r.createdAt)-Date.parse(o.createdAt))}getDeleteReq(t){this.deletePost(t.userId,t.post_id)}deletePost(t,o){this.isDeletePostLoading=!0,this._postService.deletePost(t,o).subscribe({next:()=>{this.isDeletePostLoading=!1,this.posts=this.posts.filter(r=>r._id!==o)},error:r=>{this.isDeletePostLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}}a.\u0275fac=function(t){return new(t||a)(e.Y36(m.P),e.Y36(h.N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-home"]],decls:8,vars:4,consts:[["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],[1,"text-center","text-danger"],[1,"p-0","py-2"],["class","container text-center h5 text-light",4,"ngIf"],[1,"container"],[1,"row"],["class","col-12",3,"post","themeColor","isDeletePostLoading","deletePostReq",4,"ngFor","ngForOf"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"container","text-center","h5","text-light"],["routerLink","/friends",1,"btn","btn-primary"],[1,"col-12",3,"post","themeColor","isDeletePostLoading","deletePostReq"]],template:function(t,o){1&t&&(e.YNc(0,u,2,0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,f,5,0,"div",3),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,P,1,3,"app-posts",6),e.qZA()()()),2&t&&(e.Q6J("ngIf",!o.isPostsLoaded&&""===o.errorMSG),e.xp6(2),e.hij(" ",o.errorMSG,"\n"),e.xp6(2),e.Q6J("ngIf",0===o.posts.length&&o.isPostsLoaded),e.xp6(3),e.Q6J("ngForOf",o.posts))},dependencies:[p.sg,p.O5,c.rH,g.C]});const v=[{path:"",component:a}];class i{}i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(v),c.Bz]});var C=n(433),x=n(4466);class l{}l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[p.ez,i,C.u5,x.m]})}}]);