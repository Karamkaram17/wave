"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[588],{588:(y,c,o)=>{o.r(c),o.d(c,{FriendsModule:()=>u});var s=o(6895),t=o(343),e=o(8256),a=o(4961),m=o(2637),d=o(433),f=o(1612),l=o(5472),p=o(3150);function L(n,i){1&n&&e._UZ(0,"i",4)}function x(n,i){1&n&&e._UZ(0,"i",5)}class _{constructor(i){this._userService=i,this.themeColor="light",this.friend=new f.mo,this.friendList=[],this.displayError=new e.vpe,this.isFriendshipLoading=!1,this.userId=localStorage.getItem("id"),this.areFriends=!1}ngOnInit(){this.areFriends=!!this.friendList.includes(this.friend._id)}toggleFriendship(){this.isFriendshipLoading=!0,this._userService.toggleFriendship(this.userId,this.friend._id).subscribe({next:()=>{this.isFriendshipLoading=!1,this.areFriends=!this.areFriends,this.friendList.includes(this.friend._id)?this.friendList.splice(this.friendList.indexOf(this.friend._id),1):this.friendList.push(this.friend._id),localStorage.setItem("friends",JSON.stringify(this.friendList))},error:()=>{this.isFriendshipLoading=!1,this.displayError.emit("Unexpected Error Ocurred"),setTimeout(()=>{this.displayError.emit("")},3e3)}})}}function T(n,i){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMSG," ")}}_.\u0275fac=function(i){return new(i||_)(e.Y36(a.f))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-toggle-friendship"]],inputs:{themeColor:"themeColor",friend:"friend",friendList:"friendList"},outputs:{displayError:"displayError"},decls:4,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-center","h-100",2,"cursor","pointer"],[1,"btn","p-1","m-0",3,"disabled","click"],["class","fa fa-user-alt-slash text-primary ",4,"ngIf"],["class","fa fa-user-plus  text-primary",4,"ngIf"],[1,"fa","fa-user-alt-slash","text-primary"],[1,"fa","fa-user-plus","text-primary"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return r.toggleFriendship()}),e.YNc(2,L,1,0,"i",2),e.YNc(3,x,1,0,"i",3),e.qZA()()),2&i&&(e.xp6(1),e.ekj("light","light"===r.themeColor)("dark","dark"===r.themeColor),e.Q6J("disabled",r.isFriendshipLoading),e.xp6(1),e.Q6J("ngIf",r.areFriends),e.xp6(1),e.Q6J("ngIf",!r.areFriends))},dependencies:[s.O5],encapsulation:2});class C{constructor(){this.friend=new f.mo,this.friendList=[],this.themeColor="light",this.errorMSG=""}displayError(i){this.errorMSG=i}}function I(n,i){1&n&&(e.TgZ(0,"div",6),e._uU(1," Loading ...\n"),e.qZA())}function M(n,i){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorMSG,"\n")}}function U(n,i){if(1&n&&e._UZ(0,"app-friend",8),2&n){const r=i.$implicit,g=e.oxw();e.Q6J("friendList",g.friendList)("themeColor",g.themeColor)("friend",r)}}function P(n,i){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&n){const r=e.oxw();e.xp6(1),e.hij(' no users with name "',r.filteredName,'" found\n')}}C.\u0275fac=function(i){return new(i||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-friend"]],inputs:{friend:"friend",friendList:"friendList",themeColor:"themeColor"},decls:7,vars:14,consts:[[1,"mx-auto","mb-3",2,"max-width","600px"],[1,"row","g-0","mx-3","p-2","rounded-4","border",2,"box-shadow","0 0 5px rgb(28, 28, 28)"],[1,"col-auto",3,"picture"],[1,"col",3,"user"],[1,"col-auto"],[3,"themeColor","friend","friendList","displayError"],["class","text-danger text-center",4,"ngIf"],[1,"text-danger","text-center"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-user-profile-pic",2)(3,"app-user-info",3),e.TgZ(4,"div",4)(5,"app-toggle-friendship",5),e.NdJ("displayError",function(v){return r.displayError(v)}),e.qZA()()(),e.YNc(6,T,2,1,"div",6),e.qZA()),2&i&&(e.xp6(1),e.ekj("light","light"===r.themeColor)("dark","dark"===r.themeColor)("border-dark","light"===r.themeColor)("border-secondary","dark"===r.themeColor),e.xp6(1),e.Q6J("picture",r.friend.picture),e.xp6(1),e.Q6J("user",r.friend),e.xp6(2),e.Q6J("themeColor",r.themeColor)("friend",r.friend)("friendList",r.friendList),e.xp6(1),e.Q6J("ngIf",""!==r.errorMSG))},dependencies:[s.O5,l.i,p.M,_]});class F{constructor(i,r){this._userService=i,this._color=r,this.themeColor="light",this.userId=localStorage.getItem("id"),this.isFriendsLoading=!0,this.isFriendshipLoading=!1,this.friends=[],this.filteredFriends=[],this.filteredName="",this.friendList=[],this.errorMSG=""}ngOnInit(){this.friendList=JSON.parse(localStorage.getItem("friends")),this._userService.getAllUsers().subscribe({next:i=>{this.filteredFriends=i.users.filter(r=>r._id!=this.userId),this.friends=i.users.filter(r=>r._id!=this.userId),this.isFriendsLoading=!1},error:()=>{this.isFriendsLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}}),this._color.themeColor$.subscribe(i=>this.themeColor=i)}filterUsers(){this.filteredFriends=this.friends.filter(i=>`${i.firstName.toLowerCase()} ${i.lastName.toLowerCase()}`.includes(this.filteredName.toLowerCase().trim()))}}F.\u0275fac=function(i){return new(i||F)(e.Y36(a.f),e.Y36(m.N))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-friends-page"]],decls:7,vars:13,consts:[["autocomplete","off","spellcheck","false"],["type","text","name","filter","placeholder","search users",1,"border",3,"ngModel","ngModelChange","keyup"],["class","container h3 text-center m-auto text-primary my-5",4,"ngIf"],["class","container text-center m-auto text-danger my-5",4,"ngIf"],[3,"friendList","themeColor","friend",4,"ngFor","ngForOf"],["class","container text-primary text-center",4,"ngIf"],[1,"container","h3","text-center","m-auto","text-primary","my-5"],[1,"container","text-center","m-auto","text-danger","my-5"],[3,"friendList","themeColor","friend"],[1,"container","text-primary","text-center"]],template:function(i,r){1&i&&(e.TgZ(0,"div")(1,"form",0)(2,"input",1),e.NdJ("ngModelChange",function(v){return r.filteredName=v})("keyup",function(){return r.filterUsers()}),e.qZA()()(),e.YNc(3,I,2,0,"div",2),e.YNc(4,M,2,1,"div",3),e.YNc(5,U,1,3,"app-friend",4),e.YNc(6,P,2,1,"div",5)),2&i&&(e.xp6(2),e.ekj("light","light"===r.themeColor)("border-dark","light"===r.themeColor)("border-secondary","dark"===r.themeColor)("dark","dark"===r.themeColor),e.Q6J("ngModel",r.filteredName),e.xp6(1),e.Q6J("ngIf",r.isFriendsLoading&&""===r.errorMSG),e.xp6(1),e.Q6J("ngIf",""!==r.errorMSG),e.xp6(1),e.Q6J("ngForOf",r.filteredFriends),e.xp6(1),e.Q6J("ngIf",0===r.filteredFriends.length&&!1===r.isFriendsLoading&&""===r.errorMSG))},dependencies:[s.sg,s.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,C],styles:["div[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}input[_ngcontent-%COMP%]{border-radius:.75rem;padding:.5rem;border:none;width:100%}"]});const Z=[{path:"",component:F}];class h{}h.\u0275fac=function(i){return new(i||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[t.Bz.forChild(Z),t.Bz]});var E=o(4466);class u{}u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[s.ez,h,d.u5,E.m]})},3150:(y,c,o)=>{o.d(c,{M:()=>d});var s=o(1612),t=o(8256),e=o(343),a=o(6895);function m(f,l){if(1&f&&(t.TgZ(0,"div",4),t._UZ(1,"i",5),t._uU(2),t.qZA()),2&f){const p=t.oxw();t.xp6(2),t.hij(" ",p.user.location," ")}}class d{constructor(l){this.router=l,this.themeColor="light",this.user=new s.mo}viewProfile(l){this.router.navigateByUrl(`/profile/${l}`)}}d.\u0275fac=function(l){return new(l||d)(t.Y36(e.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-user-info"]],inputs:{themeColor:"themeColor",user:"user"},decls:7,vars:7,consts:[[1,"px-2","d-flex","flex-column","justify-content-center","h-100"],[1,"d-flex","align-items-center",2,"font-size","1.2rem"],[2,"cursor","pointer",3,"click"],["class","d-flex align-items-center","style","font-size: 0.8rem",4,"ngIf"],[1,"d-flex","align-items-center",2,"font-size","0.8rem"],[1,"fas","fa-map-marker-alt","me-2","text-primary"]],template:function(l,p){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t.NdJ("click",function(){return p.viewProfile(p.user._id)}),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"titlecase"),t.qZA()(),t.YNc(6,m,3,1,"div",3),t.qZA()),2&l&&(t.xp6(3),t.AsE("",t.lcZ(4,3,p.user.firstName)," ",t.lcZ(5,5,p.user.lastName),""),t.xp6(3),t.Q6J("ngIf",p.user.location&&""!==p.user.location))},dependencies:[a.O5,a.rS],encapsulation:2})},5472:(y,c,o)=>{o.d(c,{i:()=>t});var s=o(8256);class t{constructor(){this.themeColor="light",this.picture=""}}t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-profile-pic"]],inputs:{themeColor:"themeColor",picture:"picture"},decls:1,vars:5,consts:[["alt","pic",1,"rounded","rounded-circle","border","border-1",2,"height","3rem","width","3rem",3,"src"]],template:function(a,m){1&a&&s._UZ(0,"img",0),2&a&&(s.ekj("border-dark","light"===m.themeColor)("border-light","dark"===m.themeColor),s.Q6J("src",m.picture,s.LSH))},encapsulation:2})}}]);