"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[454],{7454:(M,g,i)=>{i.r(g),i.d(g,{ProfileModule:()=>l});var a=i(6895),c=i(7825),u=i(1612),t=i(8256),f=i(4961),m=i(752),h=i(5622),x=i(1674);function P(s,o){if(1&s&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errorMSG," ")}}function v(s,o){if(1&s&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"img",13),t.TgZ(3,"div",14)(4,"h5",15),t._uU(5),t.qZA(),t.TgZ(6,"p",16),t._UZ(7,"i",17),t._uU(8),t.qZA()(),t.TgZ(9,"ul",18)(10,"li",19),t._uU(11),t.qZA(),t.TgZ(12,"li",19),t._uU(13),t.qZA()(),t.TgZ(14,"div",14)(15,"p",16)(16,"small",20),t._uU(17),t.ALo(18,"timeAgo"),t.qZA()()()()()),2&s){const e=t.oxw(2);t.xp6(1),t.ekj("cs-sticky",e.windowWidth>768),t.xp6(1),t.Q6J("src",e.user.picture,t.LSH)("alt",e.user.firstName),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(3),t.hij(" ",e.user.location," "),t.xp6(3),t.hij(" following ",e.user.friends.length," "),t.xp6(2),t.hij("posts ",e.posts.length,""),t.xp6(4),t.hij("Signed Up ",t.lcZ(18,10,e.user.createdAt),"")}}function _(s,o){1&s&&(t.TgZ(0,"div",21),t._uU(1," Loading ... "),t.qZA())}function Z(s,o){1&s&&(t.TgZ(0,"div",22)(1,"p"),t._uU(2," Oops, it looks like there are no posts to show at the moment. Don't worry though, you can always add new posts . Click the button below to add new post. "),t.qZA(),t.TgZ(3,"button",23),t._uU(4,"Add Post"),t.qZA()())}function A(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"app-posts",24),t.NdJ("deletePostReq",function(p){t.CHM(e);const S=t.oxw(2);return t.KtG(S.getDeleteReq(p))}),t.qZA()}if(2&s){const e=o.$implicit,r=t.oxw(2);t.Q6J("isDeletePostLoading",r.isDeletePostLoading)("post",e)}}function T(s,o){if(1&s&&(t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,P,2,1,"div",1),t.YNc(3,v,19,12,"div",4),t.YNc(4,_,2,0,"div",5),t.YNc(5,Z,5,0,"div",6),t.TgZ(6,"div",7)(7,"div",8),t.YNc(8,A,1,2,"app-posts",9),t.qZA()()()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",""!==e.errorMSG),t.xp6(1),t.Q6J("ngIf",e.isProfileLoaded),t.xp6(1),t.Q6J("ngIf",!e.isPostsLoaded),t.xp6(1),t.Q6J("ngIf",0===e.posts.length&&e.isPostsLoaded),t.xp6(3),t.Q6J("ngForOf",e.posts)}}function w(s,o){if(1&s&&(t.TgZ(0,"div",10)(1,"h3"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMSG)}}class d{constructor(o,e,r){this._userService=o,this._postService=e,this.route=r,this.windowWidth=0,this.posts=[],this.user=new u.n5,this.userId=localStorage.getItem("id"),this.isDeletePostLoading=!1,this.isPostsLoaded=!1,this.isProfileLoaded=!1,this.errorMSG=""}ngOnInit(){const o=this.route.snapshot.paramMap.get("id");console.log(o),this.windowWidth=window.innerWidth,this._userService.getOneUser(o).subscribe({next:e=>{this.isProfileLoaded=!0,this.user=e.user},error:e=>{this.isProfileLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}}),this._postService.getAllUserPosts(o).subscribe({next:e=>{this.posts=this.sortPosts(e.posts),this.isPostsLoaded=!0},error:e=>{this.isPostsLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}})}onResize(o){this.windowWidth=o.target.innerWidth}sortPosts(o){return o.sort((e,r)=>Date.parse(r.createdAt)-Date.parse(e.createdAt))}getDeleteReq(o){this.deletePost(o.userId,o.post_id)}deletePost(o,e){this.isDeletePostLoading=!0,this._postService.deletePost(o,e).subscribe({next:()=>{this.isDeletePostLoading=!1,this.posts=this.posts.filter(r=>r._id!==e)},error:r=>{this.isDeletePostLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}}d.\u0275fac=function(o){return new(o||d)(t.Y36(f.f),t.Y36(m.P),t.Y36(c.gz))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-profile-page"]],hostBindings:function(o,e){1&o&&t.NdJ("resize",function(p){return e.onResize(p)},!1,t.Jf7)},decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],["class","text-center text-danger",4,"ngIf"],[1,"container-fluid"],[1,"text-light","row"],["class","col-12 col-md-5 col-lg-4 col-xl-3 black",4,"ngIf"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","col-12 col-md-7 col-lg-8 col-xl-9 text-center note h5",4,"ngIf"],[1,"col-12","col-md-7","col-lg-8","col-xl-9"],[1,"row"],["class","col-12 col-xl-6 my-2",3,"isDeletePostLoading","post","deletePostReq",4,"ngFor","ngForOf"],[1,"text-center","text-danger"],[1,"col-12","col-md-5","col-lg-4","col-xl-3","black"],[1,"card","mx-auto","text-bg-dark","my-2",2,"width","16rem","z-index","0","height","fit-content"],[1,"img-fluid","rounded-start",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"fas","fa-map-marker-alt","gray"],[1,"list-group","list-group-flush"],[1,"list-group-item","text-bg-dark"],[1,"text-muted"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"col-12","col-md-7","col-lg-8","col-xl-9","text-center","note","h5"],["routerLink","/new/post",1,"btn","btn-primary"],[1,"col-12","col-xl-6","my-2",3,"isDeletePostLoading","post","deletePostReq"]],template:function(o,e){1&o&&(t.YNc(0,T,9,5,"div",0),t.YNc(1,w,3,1,"div",1)),2&o&&(t.Q6J("ngIf",""===e.errorMSG),t.xp6(1),t.Q6J("ngIf",""!==e.errorMSG))},dependencies:[a.sg,a.O5,c.rH,h.C,x.e],styles:[".note[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}.cs-sticky[_ngcontent-%COMP%]{position:sticky;top:5rem}"]});const y=[{path:"",component:d}];class n{}n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(y),c.Bz]});var C=i(433),L=i(4466);class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[a.ez,n,C.u5,L.m]})}}]);