"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[454],{7454:(J,g,r)=>{r.r(g),r.d(g,{ProfileModule:()=>d});var p=r(6895),a=r(343),m=r(1612),e=r(8256),u=r(4961),f=r(752),h=r(2637),x=r(6171),P=r(1674);function _(s,o){if(1&s&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMSG," ")}}function v(s,o){1&s&&(e.TgZ(0,"div",11),e._uU(1," Loading ... "),e.qZA())}function C(s,o){if(1&s&&(e.TgZ(0,"p",20),e._UZ(1,"i",21),e._uU(2),e.qZA()),2&s){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.user.location," ")}}function Z(s,o){if(1&s&&(e.TgZ(0,"div",12)(1,"div",13),e._UZ(2,"img",14),e.TgZ(3,"div",15)(4,"h5",16),e._uU(5),e.qZA(),e.YNc(6,C,3,1,"p",17),e.qZA(),e.TgZ(7,"ul",18)(8,"li",19),e._uU(9),e.qZA(),e.TgZ(10,"li",19),e._uU(11),e.qZA()(),e.TgZ(12,"div",15)(13,"p",20)(14,"small"),e._uU(15),e.ALo(16,"timeAgo"),e.qZA()()()()()),2&s){const t=e.oxw(2);e.xp6(1),e.ekj("text-bg-primary","light"===t.themeColor)("text-bg-dark","dark"===t.themeColor)("border-dark","light"===t.themeColor)("border-secondary","dark"===t.themeColor)("cs-sticky",t.windowWidth>768),e.xp6(1),e.Q6J("src",t.user.picture,e.LSH)("alt",t.user.firstName),e.xp6(3),e.AsE("",t.user.firstName," ",t.user.lastName,""),e.xp6(1),e.Q6J("ngIf",t.user.location&&""!=t.user.location),e.xp6(2),e.ekj("text-bg-primary","light"===t.themeColor)("text-bg-dark","dark"===t.themeColor),e.xp6(1),e.hij(" following ",t.user.friends.length," "),e.xp6(1),e.ekj("text-bg-primary","light"===t.themeColor)("text-bg-dark","dark"===t.themeColor),e.xp6(1),e.hij(" posts ",t.posts.length," "),e.xp6(4),e.hij("Signed Up ",e.lcZ(16,26,t.user.createdAt),"")}}function T(s,o){1&s&&(e.TgZ(0,"p"),e._uU(1," Oops, it looks like there are no posts to show at the moment. Don't worry though, you can always add new posts . Click the button below to add new post. "),e.qZA())}function y(s,o){if(1&s&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&s){const t=e.oxw(3);e.xp6(1),e.AsE(" it looks like ",t.user.firstName," ",t.user.lastName," has not posted yet. ")}}function A(s,o){1&s&&(e.TgZ(0,"button",25),e._uU(1," Add Post "),e.qZA())}function I(s,o){if(1&s&&(e.TgZ(0,"div",22),e.YNc(1,T,2,0,"p",23),e.YNc(2,y,2,2,"p",23),e.YNc(3,A,2,0,"button",24),e.qZA()),2&s){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.user._id==t.userId),e.xp6(1),e.Q6J("ngIf",t.user._id!==t.userId),e.xp6(1),e.Q6J("ngIf",t.user._id==t.userId)}}function w(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"app-posts",26),e.NdJ("deletePostReq",function(c){e.CHM(t);const U=e.oxw(2);return e.KtG(U.getDeleteReq(c))}),e.qZA()}if(2&s){const t=o.$implicit,i=e.oxw(2);e.Q6J("themeColor",i.themeColor)("isDeletePostLoading",i.isDeletePostLoading)("post",t)}}function L(s,o){if(1&s&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,_,2,1,"div",4),e.YNc(3,v,2,0,"div",5),e.YNc(4,Z,17,28,"div",6),e.YNc(5,I,4,3,"div",7),e.TgZ(6,"div",8)(7,"div",3),e.YNc(8,w,1,3,"app-posts",9),e.qZA()()()()),2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",""!==t.errorMSG),e.xp6(1),e.Q6J("ngIf",!t.isPostsLoaded&&!t.isProfileLoaded),e.xp6(1),e.Q6J("ngIf",t.isProfileLoaded),e.xp6(1),e.Q6J("ngIf",0===t.posts.length&&t.isPostsLoaded),e.xp6(3),e.Q6J("ngForOf",t.posts)}}function b(s,o){if(1&s&&(e.TgZ(0,"div",27)(1,"h3"),e._uU(2),e.qZA()()),2&s){const t=e.oxw();e.xp6(2),e.Oqu(t.errorMSG)}}class n{constructor(o,t,i,c){this._userService=o,this._postService=t,this.route=i,this._color=c,this.themeColor="light",this.windowWidth=0,this.posts=[],this.user=new m.n5,this.userId=localStorage.getItem("id"),this.isDeletePostLoading=!1,this.isPostsLoaded=!1,this.isProfileLoaded=!1,this.errorMSG=""}ngOnInit(){this.windowWidth=window.innerWidth;let o="";this.route.paramMap.subscribe(t=>{o=t.get("id"),null===o&&(o=localStorage.getItem("id")),this._userService.getOneUser(o).subscribe({next:i=>{this.isProfileLoaded=!0,this.user=i.user},error:i=>{this.isProfileLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}}),this._postService.getAllUserPosts(o).subscribe({next:i=>{this.posts=this.sortPosts(i.posts),this.isPostsLoaded=!0},error:i=>{this.isPostsLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}})}),this._color.themeColor$.subscribe(t=>this.themeColor=t)}onResize(o){this.windowWidth=o.target.innerWidth}sortPosts(o){return o.sort((t,i)=>Date.parse(i.createdAt)-Date.parse(t.createdAt))}getDeleteReq(o){this.deletePost(o.userId,o.post_id)}deletePost(o,t){this.isDeletePostLoading=!0,this._postService.deletePost(o,t).subscribe({next:()=>{this.isDeletePostLoading=!1,this.posts=this.posts.filter(i=>i._id!==t)},error:i=>{this.isDeletePostLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}}n.\u0275fac=function(o){return new(o||n)(e.Y36(u.f),e.Y36(f.P),e.Y36(a.gz),e.Y36(h.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-page"]],hostBindings:function(o,t){1&o&&e.NdJ("resize",function(c){return t.onResize(c)},!1,e.Jf7)},decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],["class","text-center text-danger",4,"ngIf"],[1,"container-fluid"],[1,"row"],["class","text-center text-danger col-12",4,"ngIf"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","col-12 col-md-5 col-lg-4 col-xl-4 black",4,"ngIf"],["class","col-12 col-md-7 col-lg-7 col-xl-7 text-center note h5",4,"ngIf"],[1,"col-12","col-md-7","col-lg-7","col-xl-7"],["class","col-12 my-2",3,"themeColor","isDeletePostLoading","post","deletePostReq",4,"ngFor","ngForOf"],[1,"text-center","text-danger","col-12"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"col-12","col-md-5","col-lg-4","col-xl-4","black"],[1,"card","mx-auto","my-2","border","border-1",2,"width","16rem","z-index","0","height","fit-content"],[1,"img-fluid","rounded-start",3,"src","alt"],[1,"card-body"],[1,"card-title"],["class","card-text",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"card-text"],[1,"fas","fa-map-marker-alt","gray"],[1,"col-12","col-md-7","col-lg-7","col-xl-7","text-center","note","h5"],[4,"ngIf"],["class","btn btn-primary","routerLink","/new/post",4,"ngIf"],["routerLink","/new/post",1,"btn","btn-primary"],[1,"col-12","my-2",3,"themeColor","isDeletePostLoading","post","deletePostReq"],[1,"text-center","text-danger"]],template:function(o,t){1&o&&(e.YNc(0,L,9,5,"div",0),e.YNc(1,b,3,1,"div",1)),2&o&&(e.Q6J("ngIf",""===t.errorMSG),e.xp6(1),e.Q6J("ngIf",""!==t.errorMSG))},dependencies:[p.sg,p.O5,a.rH,x.C,P.e],styles:[".note[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}.cs-sticky[_ngcontent-%COMP%]{position:sticky;top:3rem}"]});const S=[{path:"",component:n},{path:":id",component:n}];class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[a.Bz.forChild(S),a.Bz]});var M=r(433),N=r(4466);class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[p.ez,l,M.u5,N.m]})}}]);