"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[588],{588:(v,m,o)=>{o.r(m),o.d(m,{FriendsModule:()=>u});var s=o(6895),r=o(343),e=o(8256),p=o(4961),c=o(2637),d=o(433),f=o(1612),a=o(5472),l=o(3150);function y(n,i){if(1&n&&e._UZ(0,"i",4),2&n){const t=e.oxw();e.ekj("text-light","light"===t.themeColor)("text-secondary","dark"===t.themeColor)}}function L(n,i){if(1&n&&e._UZ(0,"i",5),2&n){const t=e.oxw();e.ekj("text-light","light"===t.themeColor)("text-secondary","dark"===t.themeColor)}}class _{constructor(i){this._userService=i,this.themeColor="light",this.friend=new f.mo,this.friendList=[],this.displayError=new e.vpe,this.isFriendshipLoading=!1,this.userId=localStorage.getItem("id"),this.areFriends=!1}ngOnInit(){this.areFriends=!!this.friendList.includes(this.friend._id)}toggleFriendship(){this.isFriendshipLoading=!0,this._userService.toggleFriendship(this.userId,this.friend._id).subscribe({next:()=>{this.isFriendshipLoading=!1,this.areFriends=!this.areFriends,this.friendList.includes(this.friend._id)?this.friendList.splice(this.friendList.indexOf(this.friend._id),1):this.friendList.push(this.friend._id),localStorage.setItem("friends",JSON.stringify(this.friendList))},error:()=>{this.isFriendshipLoading=!1,this.displayError.emit("Unexpected Error Ocurred"),setTimeout(()=>{this.displayError.emit("")},3e3)}})}}function T(n,i){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMSG," ")}}_.\u0275fac=function(i){return new(i||_)(e.Y36(p.f))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-toggle-friendship"]],inputs:{themeColor:"themeColor",friend:"friend",friendList:"friendList"},outputs:{displayError:"displayError"},decls:4,vars:7,consts:[[1,"d-flex","align-items-center","justify-content-center","h-100",2,"cursor","pointer"],[1,"btn","p-1","m-0",3,"disabled","click"],["class","fa fa-user-alt-slash ",3,"text-light","text-secondary",4,"ngIf"],["class","fa fa-user-plus ",3,"text-light","text-secondary",4,"ngIf"],[1,"fa","fa-user-alt-slash"],[1,"fa","fa-user-plus"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return t.toggleFriendship()}),e.YNc(2,y,1,4,"i",2),e.YNc(3,L,1,4,"i",3),e.qZA()()),2&i&&(e.xp6(1),e.ekj("btn-primary","light"===t.themeColor)("btn-dark","dark"===t.themeColor),e.Q6J("disabled",t.isFriendshipLoading),e.xp6(1),e.Q6J("ngIf",t.areFriends),e.xp6(1),e.Q6J("ngIf",!t.areFriends))},dependencies:[s.O5],encapsulation:2});class C{constructor(){this.friend=new f.mo,this.friendList=[],this.themeColor="light",this.errorMSG=""}displayError(i){this.errorMSG=i}}function I(n,i){1&n&&(e.TgZ(0,"div",6),e._uU(1," Loading ...\n"),e.qZA())}function M(n,i){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errorMSG,"\n")}}function U(n,i){if(1&n&&e._UZ(0,"app-friend",8),2&n){const t=i.$implicit,g=e.oxw();e.Q6J("friendList",g.friendList)("themeColor",g.themeColor)("friend",t)}}function P(n,i){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(' no users with name "',t.filteredName,'" found\n')}}C.\u0275fac=function(i){return new(i||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-friend"]],inputs:{friend:"friend",friendList:"friendList",themeColor:"themeColor"},decls:7,vars:14,consts:[[1,"mx-auto","mb-3",2,"max-width","600px"],[1,"row","g-0","mx-3","p-2","rounded-4","border"],[1,"col-auto",3,"picture"],[1,"col",3,"user"],[1,"col-auto"],[3,"themeColor","friend","friendList","displayError"],["class","text-danger text-center",4,"ngIf"],[1,"text-danger","text-center"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-user-profile-pic",2)(3,"app-user-info",3),e.TgZ(4,"div",4)(5,"app-toggle-friendship",5),e.NdJ("displayError",function(x){return t.displayError(x)}),e.qZA()()(),e.YNc(6,T,2,1,"div",6),e.qZA()),2&i&&(e.xp6(1),e.ekj("text-bg-primary","light"===t.themeColor)("text-bg-dark","dark"===t.themeColor)("border-primary","light"===t.themeColor)("border-light","dark"===t.themeColor),e.xp6(1),e.Q6J("picture",t.friend.picture),e.xp6(1),e.Q6J("user",t.friend),e.xp6(2),e.Q6J("themeColor",t.themeColor)("friend",t.friend)("friendList",t.friendList),e.xp6(1),e.Q6J("ngIf",""!==t.errorMSG))},dependencies:[s.O5,a.i,l.M,_]});class F{constructor(i,t){this._userService=i,this._color=t,this.themeColor="light",this.userId=localStorage.getItem("id"),this.isFriendsLoading=!0,this.isFriendshipLoading=!1,this.friends=[],this.filteredFriends=[],this.filteredName="",this.friendList=[],this.errorMSG=""}ngOnInit(){this.friendList=JSON.parse(localStorage.getItem("friends")),this._userService.getAllUsers().subscribe({next:i=>{this.filteredFriends=i.users.filter(t=>t._id!=this.userId),this.friends=i.users.filter(t=>t._id!=this.userId),this.isFriendsLoading=!1},error:()=>{this.isFriendsLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}}),this._color.themeColor$.subscribe(i=>this.themeColor=i)}filterUsers(){this.filteredFriends=this.friends.filter(i=>`${i.firstName.toLowerCase()} ${i.lastName.toLowerCase()}`.includes(this.filteredName.toLowerCase().trim()))}}F.\u0275fac=function(i){return new(i||F)(e.Y36(p.f),e.Y36(c.N))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-friends-page"]],decls:7,vars:9,consts:[["autocomplete","off","spellcheck","false"],["type","text","name","filter","placeholder","search users",3,"ngModel","ngModelChange","keyup"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","container text-center m-auto text-danger my-5",4,"ngIf"],[3,"friendList","themeColor","friend",4,"ngFor","ngForOf"],["class","container text-light text-center",4,"ngIf"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"container","text-center","m-auto","text-danger","my-5"],[3,"friendList","themeColor","friend"],[1,"container","text-light","text-center"]],template:function(i,t){1&i&&(e.TgZ(0,"div")(1,"form",0)(2,"input",1),e.NdJ("ngModelChange",function(x){return t.filteredName=x})("keyup",function(){return t.filterUsers()}),e.qZA()()(),e.YNc(3,I,2,0,"div",2),e.YNc(4,M,2,1,"div",3),e.YNc(5,U,1,3,"app-friend",4),e.YNc(6,P,2,1,"div",5)),2&i&&(e.xp6(2),e.ekj("text-bg-info","text-bg-info"===t.themeColor)("text-bg-dark","text-bg-dark"===t.themeColor),e.Q6J("ngModel",t.filteredName),e.xp6(1),e.Q6J("ngIf",t.isFriendsLoading&&""===t.errorMSG),e.xp6(1),e.Q6J("ngIf",""!==t.errorMSG),e.xp6(1),e.Q6J("ngForOf",t.filteredFriends),e.xp6(1),e.Q6J("ngIf",0===t.filteredFriends.length&&!1===t.isFriendsLoading&&""===t.errorMSG))},dependencies:[s.sg,s.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,C],styles:["div[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}input[_ngcontent-%COMP%]{border-radius:.75rem;padding:.5rem;border:none;width:100%}"]});const Z=[{path:"",component:F}];class h{}h.\u0275fac=function(i){return new(i||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[r.Bz.forChild(Z),r.Bz]});var E=o(4466);class u{}u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[s.ez,h,d.u5,E.m]})},3150:(v,m,o)=>{o.d(m,{M:()=>d});var s=o(1612),r=o(8256),e=o(343),p=o(6895);function c(f,a){if(1&f&&(r.TgZ(0,"div",4),r._UZ(1,"i",5),r._uU(2),r.qZA()),2&f){const l=r.oxw();r.xp6(1),r.ekj("text-light","light"===l.themeColor)("text-secondary","dark"===l.themeColor),r.xp6(1),r.hij(" ",l.user.location," ")}}class d{constructor(a){this.router=a,this.themeColor="light",this.user=new s.mo}viewProfile(a){this.router.navigateByUrl(`/profile/${a}`)}}d.\u0275fac=function(a){return new(a||d)(r.Y36(e.F0))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-user-info"]],inputs:{themeColor:"themeColor",user:"user"},decls:7,vars:7,consts:[[1,"px-2","d-flex","flex-column","justify-content-center","h-100"],[1,"d-flex","align-items-center",2,"font-size","1.2rem"],[2,"cursor","pointer",3,"click"],["class","d-flex align-items-center","style","font-size: 0.8rem",4,"ngIf"],[1,"d-flex","align-items-center",2,"font-size","0.8rem"],[1,"fas","fa-map-marker-alt","me-2"]],template:function(a,l){1&a&&(r.TgZ(0,"div",0)(1,"div",1)(2,"span",2),r.NdJ("click",function(){return l.viewProfile(l.user._id)}),r._uU(3),r.ALo(4,"titlecase"),r.ALo(5,"titlecase"),r.qZA()(),r.YNc(6,c,3,5,"div",3),r.qZA()),2&a&&(r.xp6(3),r.AsE("",r.lcZ(4,3,l.user.firstName)," ",r.lcZ(5,5,l.user.lastName),""),r.xp6(3),r.Q6J("ngIf",l.user.location&&""!==l.user.location))},dependencies:[p.O5,p.rS],encapsulation:2})},5472:(v,m,o)=>{o.d(m,{i:()=>r});var s=o(8256);class r{constructor(){this.themeColor="light",this.picture=""}}r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=s.Xpm({type:r,selectors:[["app-user-profile-pic"]],inputs:{themeColor:"themeColor",picture:"picture"},decls:1,vars:5,consts:[["alt","pic",1,"rounded","rounded-circle","border","border-1",2,"height","3rem","width","3rem",3,"src"]],template:function(p,c){1&p&&s._UZ(0,"img",0),2&p&&(s.ekj("border-dark","light"===c.themeColor)("border-light","dark"===c.themeColor),s.Q6J("src",c.picture,s.LSH))},encapsulation:2})}}]);