"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[247],{7247:(C,u,i)=>{i.r(u),i.d(u,{NewpostModule:()=>g});var l=i(6895),d=i(343),t=i(8256),_=i(752),f=i(2637),o=i(433);function P(p,r){if(1&p&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&p){const e=r.$implicit;t.Q6J("value",e[0]),t.xp6(1),t.hij(" ",e[1]," ")}}function n(p,r){if(1&p&&(t.TgZ(0,"div",19),t._UZ(1,"img",20),t.qZA()),2&p){const e=t.oxw();t.Udp("background-image","url("+e.selectedPic+")"),t.xp6(1),t.Q6J("src",e.selectedPic,t.LSH)("alt",e.selectedPic)}}class s{constructor(r,e){this._postService=r,this._color=e,this.themeColor="light",this.loading=!1,this.errorMSG="",this.content="",this.location="",this.picture="",this.id=localStorage.getItem("id"),this.selectedPic="",this.pics=[["https://cdn.pixabay.com/photo/2022/03/23/18/56/beach-7087722__340.jpg","beach"],["https://cdn.pixabay.com/photo/2023/02/11/20/31/birds-7783664__340.jpg","birds"],["https://cdn.pixabay.com/photo/2023/01/21/13/39/night-sky-7733876__340.jpg","night sky"],["https://cdn.pixabay.com/photo/2022/11/10/20/44/switzerland-7583676__340.jpg","switzerland"],["https://cdn.pixabay.com/photo/2023/02/08/08/50/frequency-wave-7776034__340.jpg","frequency wave"],["https://cdn.pixabay.com/photo/2023/01/27/06/17/pheasant-7747830__340.jpg","pheasant"],["https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904__340.jpg","superb fairywren"],["https://cdn.pixabay.com/photo/2023/02/04/09/20/castle-7766794__340.jpg","castle"],["https://cdn.pixabay.com/photo/2023/02/14/18/55/flowers-7790227_640.jpg","flowers"]]}ngOnInit(){this._color.themeColor$.subscribe(r=>this.themeColor=r)}createPost(r){""!==this.selectedPic&&(this.loading=!0,this._postService.createPost(this.id,this.content,this.location,this.selectedPic).subscribe({next:()=>{this.loading=!1,r.reset(),this.content="",this.location="",this.selectedPic=""},error:e=>{this.loading=!1,409===e.status?(this.errorMSG="email already taken",setTimeout(()=>{this.errorMSG=""},3e3)):400===e.status?(this.errorMSG="missing information",setTimeout(()=>{this.errorMSG=""},3e3)):(this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3))}}))}}s.\u0275fac=function(r){return new(r||s)(t.Y36(_.P),t.Y36(f.N))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-new-post-page"]],decls:28,vars:35,consts:[[1,"mx-auto","my-2",2,"max-width","600px"],["autocomplete","off","novalidate","",1,"pt-3","px-3","rounded-4","d-flex","flex-column","border","border-2","mx-2",3,"ngSubmit"],["loginForm","ngForm"],[1,"py-3","text-center"],[1,"mb-3"],["required","","name","picture",1,"form-select","form-select-lg",3,"ngModel","ngModelChange"],["picture","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"text-danger"],["class","post-pic",3,"backgroundImage",4,"ngIf"],[1,"form-floating","mb-3"],["type","text","name","content","placeholder","first name","maxlength","50",1,"form-control",3,"ngModel","ngModelChange"],["contentInput","ngModel"],["type","text","name","location","placeholder","location","maxlength","20",1,"form-control",3,"ngModel","ngModelChange"],["locationInput","ngModel"],[1,"btn","mb-3",3,"disabled"],[1,"text-danger","text-center"],[3,"value"],[1,"post-pic"],[3,"src","alt"]],template:function(r,e){if(1&r){const M=t.EpF();t.TgZ(0,"div",0)(1,"form",1,2),t.NdJ("ngSubmit",function(){t.CHM(M);const m=t.MAs(2);return t.KtG(e.createPost(m))}),t.TgZ(3,"h1",3),t._uU(4,"New Post"),t.qZA(),t.TgZ(5,"div",4)(6,"select",5,6),t.NdJ("ngModelChange",function(m){return e.selectedPic=m}),t.TgZ(8,"option",7),t._uU(9,"Select a picture"),t.qZA(),t.YNc(10,P,2,2,"option",8),t.qZA(),t.TgZ(11,"small",9),t._uU(12,"please select a picture"),t.qZA()(),t.YNc(13,n,2,4,"div",10),t.TgZ(14,"div",11)(15,"input",12,13),t.NdJ("ngModelChange",function(m){return e.content=m}),t.qZA(),t.TgZ(17,"label"),t._uU(18,"description"),t.qZA()(),t.TgZ(19,"div",11)(20,"input",14,15),t.NdJ("ngModelChange",function(m){return e.location=m}),t.qZA(),t.TgZ(22,"label"),t._uU(23,"Location"),t.qZA()(),t.TgZ(24,"button",16),t._uU(25," New Post "),t.qZA(),t.TgZ(26,"div",17),t._uU(27),t.qZA()()()}if(2&r){const M=t.MAs(2),h=t.MAs(7);t.xp6(1),t.ekj("text-bg-primary","light"===e.themeColor)("text-bg-dark","dark"===e.themeColor)("border-dark","light"===e.themeColor)("border-light","dark"===e.themeColor),t.xp6(5),t.ekj("is-invalid",h.invalid&&h.touched)("text-bg-primary","light"===e.themeColor)("text-bg-dark","dark"===e.themeColor),t.Q6J("ngModel",e.selectedPic),t.xp6(4),t.Q6J("ngForOf",e.pics),t.xp6(1),t.ekj("d-none",h.valid||h.untouched),t.xp6(2),t.Q6J("ngIf",""!=e.selectedPic),t.xp6(2),t.ekj("text-bg-primary","light"===e.themeColor)("text-bg-dark","dark"===e.themeColor),t.Q6J("ngModel",e.content),t.xp6(5),t.ekj("text-bg-primary","light"===e.themeColor)("text-bg-dark","dark"===e.themeColor),t.Q6J("ngModel",e.location),t.xp6(4),t.ekj("btn-light","light"===e.themeColor)("btn-secondary","dark"===e.themeColor),t.Q6J("disabled",M.form.invalid||!0===e.loading),t.xp6(3),t.Oqu(e.errorMSG)}},dependencies:[l.sg,l.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.nD,o.On,o.F],styles:[".post-pic[_ngcontent-%COMP%]{min-height:200px;max-width:400px;max-height:600px;padding:0;background-size:cover;background-position:center center;display:flex;text-align:center;justify-content:center;margin:1rem auto}.post-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}"]});const c=[{path:"",component:s}];class a{}a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(c),d.Bz]});class g{}g.\u0275fac=function(r){return new(r||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[l.ez,a,o.u5]})},752:(C,u,i)=>{i.d(u,{P:()=>o});var l=i(262),d=i(2843),t=i(5041),_=i(8256),f=i(529);class o{constructor(n){this.http=n}getAllUserPosts(n){return this.http.get(`${t.J}/posts/my-posts/${n}`).pipe((0,l.K)(s=>(0,d._)(()=>s)))}getFriendsPosts(n){return this.http.get(`${t.J}/posts/my-friends-posts/${n}`).pipe((0,l.K)(s=>(0,d._)(()=>s)))}deletePost(n,s){return this.http.delete(`${t.J}/posts/${n}/post/${s}`).pipe((0,l.K)(c=>(0,d._)(()=>c)))}addComment(n,s,c){return this.http.patch(`${t.J}/posts/${n}/comment/${s}`,{content:c}).pipe((0,l.K)(a=>(0,d._)(()=>a)))}deleteComment(n,s,c){return this.http.patch(`${t.J}/posts/${n}/post/${s}/delete-comment/${c}`,{}).pipe((0,l.K)(a=>(0,d._)(()=>a)))}toggleLike(n,s){return this.http.patch(`${t.J}/posts/${n}/like/${s}`,{}).pipe((0,l.K)(c=>(0,d._)(()=>c)))}createPost(n,s,c,a){return this.http.post(`${t.J}/posts/my-posts/${n}`,{description:s,location:c,picture:a}).pipe((0,l.K)(g=>(0,d._)(()=>g)))}}o.\u0275fac=function(n){return new(n||o)(_.LFG(f.eN))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}}]);