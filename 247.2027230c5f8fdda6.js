"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[247],{7247:(M,h,r)=>{r.r(h),r.d(h,{NewpostModule:()=>c});var l=r(6895),d=r(7825),t=r(8256),_=r(752),p=r(433);function g(a,i){if(1&a&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&a){const o=i.$implicit;t.Q6J("value",o[0]),t.xp6(1),t.hij(" ",o[1]," ")}}function f(a,i){if(1&a&&(t.TgZ(0,"div",20),t._UZ(1,"img",21),t.qZA()),2&a){const o=t.oxw();t.Udp("background-image","url("+o.selectedPic+")"),t.xp6(1),t.Q6J("src",o.selectedPic,t.LSH)("alt",o.selectedPic)}}class e{constructor(i){this._postService=i,this.loading=!1,this.errorMSG="",this.content="",this.location="",this.picture="",this.id=localStorage.getItem("id"),this.selectedPic="",this.pics=[["https://cdn.pixabay.com/photo/2022/03/23/18/56/beach-7087722__340.jpg","beach"],["https://cdn.pixabay.com/photo/2023/02/11/20/31/birds-7783664__340.jpg","birds"],["https://cdn.pixabay.com/photo/2023/01/21/13/39/night-sky-7733876__340.jpg","night sky"],["https://cdn.pixabay.com/photo/2022/11/10/20/44/switzerland-7583676__340.jpg","switzerland"],["https://cdn.pixabay.com/photo/2023/02/08/08/50/frequency-wave-7776034__340.jpg","frequency wave"],["https://cdn.pixabay.com/photo/2023/01/27/06/17/pheasant-7747830__340.jpg","pheasant"],["https://cdn.pixabay.com/photo/2023/02/06/01/14/superb-fairywren-7770904__340.jpg","superb fairywren"],["https://cdn.pixabay.com/photo/2023/02/04/09/20/castle-7766794__340.jpg","castle"],["https://cdn.pixabay.com/photo/2023/02/14/18/55/flowers-7790227_640.jpg","flowers"]]}createPost(i){""!==this.selectedPic&&(this.loading=!0,this._postService.createPost(this.id,this.content,this.location,this.selectedPic).subscribe({next:()=>{this.loading=!1,i.reset(),this.content="",this.location="",this.selectedPic=""},error:o=>{this.loading=!1,409===o.status?(this.errorMSG="email already taken",setTimeout(()=>{this.errorMSG=""},3e3)):400===o.status?(this.errorMSG="missing information",setTimeout(()=>{this.errorMSG=""},3e3)):(this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3))}}))}}e.\u0275fac=function(i){return new(i||e)(t.Y36(_.P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-new-post-page"]],decls:28,vars:11,consts:[[1,"mx-auto","my-2",2,"max-width","600px"],["autocomplete","off","novalidate","",1,"text-bg-dark","pt-3","px-3","rounded-4","d-flex","flex-column","border","border-dark","border-3","mx-2",3,"ngSubmit"],["loginForm","ngForm"],[1,"py-3","text-center"],[1,"mb-3"],["required","","name","picture",1,"form-select","form-select-lg","text-bg-dark",3,"ngModel","ngModelChange"],["picture","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"text-danger"],["class","post-pic",3,"backgroundImage",4,"ngIf"],[1,"form-floating","mb-3"],["type","text","name","content","placeholder","first name","maxlength","50",1,"form-control","text-bg-dark",3,"ngModel","ngModelChange"],["contentInput","ngModel"],[1,"text-secondary"],["type","text","name","location","placeholder","location","maxlength","20",1,"form-control","text-bg-dark",3,"ngModel","ngModelChange"],["locationInput","ngModel"],[1,"btn","btn-secondary","mb-3",3,"disabled"],[1,"text-danger","text-center"],[3,"value"],[1,"post-pic"],[3,"src","alt"]],template:function(i,o){if(1&i){const P=t.EpF();t.TgZ(0,"div",0)(1,"form",1,2),t.NdJ("ngSubmit",function(){t.CHM(P);const u=t.MAs(2);return t.KtG(o.createPost(u))}),t.TgZ(3,"h1",3),t._uU(4,"New Post"),t.qZA(),t.TgZ(5,"div",4)(6,"select",5,6),t.NdJ("ngModelChange",function(u){return o.selectedPic=u}),t.TgZ(8,"option",7),t._uU(9,"Select a picture"),t.qZA(),t.YNc(10,g,2,2,"option",8),t.qZA(),t.TgZ(11,"small",9),t._uU(12,"please select a picture"),t.qZA()(),t.YNc(13,f,2,4,"div",10),t.TgZ(14,"div",11)(15,"input",12,13),t.NdJ("ngModelChange",function(u){return o.content=u}),t.qZA(),t.TgZ(17,"label",14),t._uU(18,"description"),t.qZA()(),t.TgZ(19,"div",11)(20,"input",15,16),t.NdJ("ngModelChange",function(u){return o.location=u}),t.qZA(),t.TgZ(22,"label",14),t._uU(23,"Location"),t.qZA()(),t.TgZ(24,"button",17),t._uU(25," New Post "),t.qZA(),t.TgZ(26,"div",18),t._uU(27),t.qZA()()()}if(2&i){const P=t.MAs(2),m=t.MAs(7);t.xp6(6),t.ekj("is-invalid",m.invalid&&m.touched),t.Q6J("ngModel",o.selectedPic),t.xp6(4),t.Q6J("ngForOf",o.pics),t.xp6(1),t.ekj("d-none",m.valid||m.untouched),t.xp6(2),t.Q6J("ngIf",""!=o.selectedPic),t.xp6(2),t.Q6J("ngModel",o.content),t.xp6(5),t.Q6J("ngModel",o.location),t.xp6(4),t.Q6J("disabled",P.form.invalid||!0===o.loading),t.xp6(3),t.Oqu(o.errorMSG)}},dependencies:[l.sg,l.O5,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.Q7,p.nD,p.On,p.F],styles:[".post-pic[_ngcontent-%COMP%]{min-height:200px;max-width:400px;max-height:600px;padding:0;background-size:cover;background-position:center center;display:flex;text-align:center;justify-content:center;margin:1rem auto}.post-pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}"]});const s=[{path:"",component:e}];class n{}n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(s),d.Bz]});class c{}c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[l.ez,n,p.u5]})},752:(M,h,r)=>{r.d(h,{P:()=>g});var l=r(262),d=r(2843),t=r(5041),_=r(8256),p=r(529);class g{constructor(e){this.http=e}getAllUserPosts(e){return this.http.get(`${t.J}/posts/my-posts/${e}`).pipe((0,l.K)(s=>(0,d._)(()=>s)))}getFriendsPosts(e){return this.http.get(`${t.J}/posts/my-friends-posts/${e}`).pipe((0,l.K)(s=>(0,d._)(()=>s)))}deletePost(e,s){return this.http.delete(`${t.J}/posts/${e}/post/${s}`).pipe((0,l.K)(n=>(0,d._)(()=>n)))}addComment(e,s,n){return this.http.patch(`${t.J}/posts/${e}/comment/${s}`,{content:n}).pipe((0,l.K)(c=>(0,d._)(()=>c)))}deleteComment(e,s,n){return this.http.patch(`${t.J}/posts/${e}/post/${s}/delete-comment/${n}`,{}).pipe((0,l.K)(c=>(0,d._)(()=>c)))}toggleLike(e,s){return this.http.patch(`${t.J}/posts/${e}/like/${s}`,{}).pipe((0,l.K)(n=>(0,d._)(()=>n)))}createPost(e,s,n,c){return this.http.post(`${t.J}/posts/my-posts/${e}`,{description:s,location:n,picture:c}).pipe((0,l.K)(a=>(0,d._)(()=>a)))}}g.\u0275fac=function(e){return new(e||g)(_.LFG(p.eN))},g.\u0275prov=_.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}}]);