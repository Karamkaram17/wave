"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[588],{588:(y,u,s)=>{s.r(u),s.d(u,{FriendsModule:()=>g});var o=s(6895),r=s(7825),e=s(8256),l=s(4961),d=s(433),f=s(1612),c=s(5472),a=s(3150);function p(t,i){1&t&&e._UZ(0,"i",4)}function L(t,i){1&t&&e._UZ(0,"i",5)}class h{constructor(i){this._userService=i,this.friend=new f.mo,this.friendList=[],this.displayError=new e.vpe,this.isFriendshipLoading=!1,this.userId=localStorage.getItem("id"),this.areFriends=!1}ngOnInit(){this.areFriends=!!this.friendList.includes(this.friend._id)}toggleFriendship(){this.isFriendshipLoading=!0,this._userService.toggleFriendship(this.userId,this.friend._id).subscribe({next:()=>{this.isFriendshipLoading=!1,this.areFriends=!this.areFriends,this.friendList.includes(this.friend._id)?this.friendList.splice(this.friendList.indexOf(this.friend._id),1):this.friendList.push(this.friend._id),localStorage.setItem("friends",JSON.stringify(this.friendList))},error:()=>{this.isFriendshipLoading=!1,this.displayError.emit("Unexpected Error Ocurred"),setTimeout(()=>{this.displayError.emit("")},3e3)}})}}function C(t,i){if(1&t&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.errorMSG," ")}}h.\u0275fac=function(i){return new(i||h)(e.Y36(l.f))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-toggle-friendship"]],inputs:{friend:"friend",friendList:"friendList"},outputs:{displayError:"displayError"},decls:4,vars:3,consts:[[1,"d-flex","align-items-center","justify-content-center","h-100",2,"cursor","pointer"],[1,"btn","btn-dark","p-1","m-0",3,"disabled","click"],["class","fa fa-user-alt-slash gray",4,"ngIf"],["class","fa fa-user-plus gray",4,"ngIf"],[1,"fa","fa-user-alt-slash","gray"],[1,"fa","fa-user-plus","gray"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.toggleFriendship()}),e.YNc(2,p,1,0,"i",2),e.YNc(3,L,1,0,"i",3),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("disabled",n.isFriendshipLoading),e.xp6(1),e.Q6J("ngIf",n.areFriends),e.xp6(1),e.Q6J("ngIf",!n.areFriends))},dependencies:[o.O5],encapsulation:2});class _{constructor(){this.friend=new f.mo,this.friendList=[],this.errorMSG=""}displayError(i){this.errorMSG=i}}function T(t,i){1&t&&(e.TgZ(0,"div",6),e._uU(1," Loading ...\n"),e.qZA())}function I(t,i){if(1&t&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.errorMSG,"\n")}}function M(t,i){if(1&t&&e._UZ(0,"app-friend",8),2&t){const n=i.$implicit,v=e.oxw();e.Q6J("friendList",v.friendList)("friend",n)}}function U(t,i){if(1&t&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(' no users with name "',n.filteredName,'" found\n')}}_.\u0275fac=function(i){return new(i||_)},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-friend"]],inputs:{friend:"friend",friendList:"friendList"},decls:7,vars:5,consts:[[1,"mx-auto","mb-3",2,"max-width","600px"],[1,"text-bg-dark","row","g-0","mx-3","p-2","rounded-4"],[1,"col-auto",3,"picture"],[1,"col",3,"user"],[1,"col-auto"],[3,"friend","friendList","displayError"],["class","text-danger text-center",4,"ngIf"],[1,"text-danger","text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-user-profile-pic",2)(3,"app-user-info",3),e.TgZ(4,"div",4)(5,"app-toggle-friendship",5),e.NdJ("displayError",function(x){return n.displayError(x)}),e.qZA()()(),e.YNc(6,C,2,1,"div",6),e.qZA()),2&i&&(e.xp6(2),e.Q6J("picture",n.friend.picture),e.xp6(1),e.Q6J("user",n.friend),e.xp6(2),e.Q6J("friend",n.friend)("friendList",n.friendList),e.xp6(1),e.Q6J("ngIf",""!==n.errorMSG))},dependencies:[o.O5,c.i,a.M,h]});class F{constructor(i){this._userService=i,this.userId=localStorage.getItem("id"),this.isFriendsLoading=!0,this.isFriendshipLoading=!1,this.friends=[],this.filteredFriends=[],this.filteredName="",this.friendList=[],this.errorMSG=""}ngOnInit(){this.friendList=JSON.parse(localStorage.getItem("friends")),this._userService.getAllUsers().subscribe({next:i=>{this.filteredFriends=i.users.filter(n=>n._id!=this.userId),this.friends=i.users.filter(n=>n._id!=this.userId),this.isFriendsLoading=!1},error:()=>{this.isFriendsLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}filterUsers(){this.filteredFriends=this.friends.filter(i=>`${i.firstName} ${i.lastName}`.includes(this.filteredName.trim()))}}F.\u0275fac=function(i){return new(i||F)(e.Y36(l.f))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-friends-page"]],decls:7,vars:5,consts:[["autocomplete","off","spellcheck","false"],["type","text","name","filter","placeholder","search users",1,"text-bg-dark",3,"ngModel","ngModelChange","keyup"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","container text-center m-auto text-danger my-5",4,"ngIf"],[3,"friendList","friend",4,"ngFor","ngForOf"],["class","container text-light text-center",4,"ngIf"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"container","text-center","m-auto","text-danger","my-5"],[3,"friendList","friend"],[1,"container","text-light","text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div")(1,"form",0)(2,"input",1),e.NdJ("ngModelChange",function(x){return n.filteredName=x})("keyup",function(){return n.filterUsers()}),e.qZA()()(),e.YNc(3,T,2,0,"div",2),e.YNc(4,I,2,1,"div",3),e.YNc(5,M,1,2,"app-friend",4),e.YNc(6,U,2,1,"div",5)),2&i&&(e.xp6(2),e.Q6J("ngModel",n.filteredName),e.xp6(1),e.Q6J("ngIf",n.isFriendsLoading&&""===n.errorMSG),e.xp6(1),e.Q6J("ngIf",""!==n.errorMSG),e.xp6(1),e.Q6J("ngForOf",n.filteredFriends),e.xp6(1),e.Q6J("ngIf",0===n.filteredFriends.length&&!1===n.isFriendsLoading&&""===n.errorMSG))},dependencies:[o.sg,o.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F,_],styles:["div[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}input[_ngcontent-%COMP%]{border-radius:.75rem;padding:.5rem;border:none;width:100%}"]});const P=[{path:"",component:F}];class m{}m.\u0275fac=function(i){return new(i||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[r.Bz.forChild(P),r.Bz]});var Z=s(4466);class g{}g.\u0275fac=function(i){return new(i||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[o.ez,m,d.u5,Z.m]})},3150:(y,u,s)=>{s.d(u,{M:()=>f});var o=s(1612),r=s(8256),e=s(7825),l=s(6895);function d(c,a){if(1&c&&(r.TgZ(0,"div",4),r._UZ(1,"i",5),r._uU(2),r.qZA()),2&c){const p=r.oxw();r.xp6(2),r.hij(" ",p.user.location," ")}}class f{constructor(a){this.router=a,this.user=new o.mo}viewProfile(a){this.router.navigateByUrl(`/profile/${a}`)}}f.\u0275fac=function(a){return new(a||f)(r.Y36(e.F0))},f.\u0275cmp=r.Xpm({type:f,selectors:[["app-user-info"]],inputs:{user:"user"},decls:7,vars:7,consts:[[1,"px-2","d-flex","flex-column","justify-content-center","h-100"],[1,"d-flex","align-items-center",2,"font-size","1.2rem"],[2,"cursor","pointer",3,"click"],["class","d-flex align-items-center","style","font-size: 0.8rem",4,"ngIf"],[1,"d-flex","align-items-center",2,"font-size","0.8rem"],[1,"fas","fa-map-marker-alt","me-2","gray"]],template:function(a,p){1&a&&(r.TgZ(0,"div",0)(1,"div",1)(2,"span",2),r.NdJ("click",function(){return p.viewProfile(p.user._id)}),r._uU(3),r.ALo(4,"titlecase"),r.ALo(5,"titlecase"),r.qZA()(),r.YNc(6,d,3,1,"div",3),r.qZA()),2&a&&(r.xp6(3),r.AsE("",r.lcZ(4,3,p.user.firstName)," ",r.lcZ(5,5,p.user.lastName),""),r.xp6(3),r.Q6J("ngIf",p.user.location&&""!==p.user.location))},dependencies:[l.O5,l.rS],encapsulation:2})},5472:(y,u,s)=>{s.d(u,{i:()=>r});var o=s(8256);class r{constructor(){this.picture=""}}r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-user-profile-pic"]],inputs:{picture:"picture"},decls:1,vars:1,consts:[["alt","pic",1,"rounded","rounded-circle",2,"height","3rem","width","3rem",3,"src"]],template:function(l,d){1&l&&o._UZ(0,"img",0),2&l&&o.Q6J("src",d.picture,o.LSH)},encapsulation:2})}}]);