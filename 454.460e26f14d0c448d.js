"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[454],{7454:(N,g,n)=>{n.r(g),n.d(g,{ProfileModule:()=>d});var a=n(6895),c=n(7825),u=n(1612),t=n(8256),f=n(4961),m=n(752),x=n(6171),h=n(1674);function P(s,o){if(1&s&&(t.TgZ(0,"div",11),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errorMSG," ")}}function _(s,o){1&s&&(t.TgZ(0,"div",12),t._uU(1," Loading ... "),t.qZA())}function v(s,o){if(1&s&&(t.TgZ(0,"p",21),t._UZ(1,"i",23),t._uU(2),t.qZA()),2&s){const e=t.oxw(3);t.xp6(2),t.hij(" ",e.user.location," ")}}function Z(s,o){if(1&s&&(t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"img",15),t.TgZ(3,"div",16)(4,"h5",17),t._uU(5),t.qZA(),t.YNc(6,v,3,1,"p",18),t.qZA(),t.TgZ(7,"ul",19)(8,"li",20),t._uU(9),t.qZA(),t.TgZ(10,"li",20),t._uU(11),t.qZA()(),t.TgZ(12,"div",16)(13,"p",21)(14,"small",22),t._uU(15),t.ALo(16,"timeAgo"),t.qZA()()()()()),2&s){const e=t.oxw(2);t.xp6(1),t.ekj("cs-sticky",e.windowWidth>768),t.xp6(1),t.Q6J("src",e.user.picture,t.LSH)("alt",e.user.firstName),t.xp6(3),t.AsE("",e.user.firstName," ",e.user.lastName,""),t.xp6(1),t.Q6J("ngIf",e.user.location&&""!=e.user.location),t.xp6(3),t.hij(" following ",e.user.friends.length," "),t.xp6(2),t.hij("posts ",e.posts.length,""),t.xp6(4),t.hij("Signed Up ",t.lcZ(16,10,e.user.createdAt),"")}}function T(s,o){1&s&&(t.TgZ(0,"p"),t._uU(1," Oops, it looks like there are no posts to show at the moment. Don't worry though, you can always add new posts . Click the button below to add new post. "),t.qZA())}function A(s,o){if(1&s&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.AsE(" it looks like ",e.user.firstName," ",e.user.lastName," has not posted yet. ")}}function w(s,o){1&s&&(t.TgZ(0,"button",27),t._uU(1," Add Post "),t.qZA())}function I(s,o){if(1&s&&(t.TgZ(0,"div",24),t.YNc(1,T,2,0,"p",25),t.YNc(2,A,2,2,"p",25),t.YNc(3,w,2,0,"button",26),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.user._id==e.userId),t.xp6(1),t.Q6J("ngIf",e.user._id!==e.userId),t.xp6(1),t.Q6J("ngIf",e.user._id==e.userId)}}function y(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"app-posts",28),t.NdJ("deletePostReq",function(p){t.CHM(e);const J=t.oxw(2);return t.KtG(J.getDeleteReq(p))}),t.qZA()}if(2&s){const e=o.$implicit,i=t.oxw(2);t.Q6J("isDeletePostLoading",i.isDeletePostLoading)("post",e)}}function C(s,o){if(1&s&&(t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,P,2,1,"div",4),t.YNc(3,_,2,0,"div",5),t.YNc(4,Z,17,12,"div",6),t.YNc(5,I,4,3,"div",7),t.TgZ(6,"div",8)(7,"div",9),t.YNc(8,y,1,2,"app-posts",10),t.qZA()()()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",""!==e.errorMSG),t.xp6(1),t.Q6J("ngIf",!e.isPostsLoaded&&!e.isProfileLoaded),t.xp6(1),t.Q6J("ngIf",e.isProfileLoaded),t.xp6(1),t.Q6J("ngIf",0===e.posts.length&&e.isPostsLoaded),t.xp6(3),t.Q6J("ngForOf",e.posts)}}function L(s,o){if(1&s&&(t.TgZ(0,"div",29)(1,"h3"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMSG)}}class r{constructor(o,e,i){this._userService=o,this._postService=e,this.route=i,this.windowWidth=0,this.posts=[],this.user=new u.n5,this.userId=localStorage.getItem("id"),this.isDeletePostLoading=!1,this.isPostsLoaded=!1,this.isProfileLoaded=!1,this.errorMSG=""}ngOnInit(){this.windowWidth=window.innerWidth;let o="";this.route.paramMap.subscribe(e=>{o=e.get("id"),null===o&&(o=localStorage.getItem("id")),this._userService.getOneUser(o).subscribe({next:i=>{this.isProfileLoaded=!0,this.user=i.user},error:i=>{this.isProfileLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}}),this._postService.getAllUserPosts(o).subscribe({next:i=>{this.posts=this.sortPosts(i.posts),this.isPostsLoaded=!0},error:i=>{this.isPostsLoaded=!0,this.errorMSG="Unexpected Error Ocurred"}})})}onResize(o){this.windowWidth=o.target.innerWidth}sortPosts(o){return o.sort((e,i)=>Date.parse(i.createdAt)-Date.parse(e.createdAt))}getDeleteReq(o){this.deletePost(o.userId,o.post_id)}deletePost(o,e){this.isDeletePostLoading=!0,this._postService.deletePost(o,e).subscribe({next:()=>{this.isDeletePostLoading=!1,this.posts=this.posts.filter(i=>i._id!==e)},error:i=>{this.isDeletePostLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}}r.\u0275fac=function(o){return new(o||r)(t.Y36(f.f),t.Y36(m.P),t.Y36(c.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-profile-page"]],hostBindings:function(o,e){1&o&&t.NdJ("resize",function(p){return e.onResize(p)},!1,t.Jf7)},decls:2,vars:2,consts:[["class","container-fluid",4,"ngIf"],["class","text-center text-danger",4,"ngIf"],[1,"container-fluid"],[1,"text-light","row"],["class","text-center text-danger col-12",4,"ngIf"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","col-12 col-md-5 col-lg-4 col-xl-4 black",4,"ngIf"],["class","col-12 col-md-7 col-lg-7 col-xl-7 text-center note h5",4,"ngIf"],[1,"col-12","col-md-7","col-lg-7","col-xl-7"],[1,"row"],["class","col-12 my-2",3,"isDeletePostLoading","post","deletePostReq",4,"ngFor","ngForOf"],[1,"text-center","text-danger","col-12"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"col-12","col-md-5","col-lg-4","col-xl-4","black"],[1,"card","mx-auto","text-bg-dark","my-2",2,"width","16rem","z-index","0","height","fit-content"],[1,"img-fluid","rounded-start",3,"src","alt"],[1,"card-body"],[1,"card-title"],["class","card-text",4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item","text-bg-dark"],[1,"card-text"],[1,"text-muted"],[1,"fas","fa-map-marker-alt","gray"],[1,"col-12","col-md-7","col-lg-7","col-xl-7","text-center","note","h5"],[4,"ngIf"],["class","btn btn-primary","routerLink","/new/post",4,"ngIf"],["routerLink","/new/post",1,"btn","btn-primary"],[1,"col-12","my-2",3,"isDeletePostLoading","post","deletePostReq"],[1,"text-center","text-danger"]],template:function(o,e){1&o&&(t.YNc(0,C,9,5,"div",0),t.YNc(1,L,3,1,"div",1)),2&o&&(t.Q6J("ngIf",""===e.errorMSG),t.xp6(1),t.Q6J("ngIf",""!==e.errorMSG))},dependencies:[a.sg,a.O5,c.rH,x.C,h.e],styles:[".note[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}.cs-sticky[_ngcontent-%COMP%]{position:sticky;top:3rem}"]});const S=[{path:"",component:r},{path:":id",component:r}];class l{}l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[c.Bz.forChild(S),c.Bz]});var M=n(433),U=n(4466);class d{}d.\u0275fac=function(o){return new(o||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[a.ez,l,M.u5,U.m]})}}]);