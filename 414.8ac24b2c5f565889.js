"use strict";(self.webpackChunkmy_App=self.webpackChunkmy_App||[]).push([[414],{3414:(P,m,r)=>{r.r(m),r.d(m,{FriendsModule:()=>o});var a=r(6895),g=r(7825),e=r(8256),p=r(4961),s=r(433),h=r(1612);function u(t,i){1&t&&e._UZ(0,"i",11)}function _(t,i){1&t&&e._UZ(0,"i",12)}function F(t,i){if(1&t&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.errorMSG," ")}}class f{constructor(i,n){this._userService=i,this.router=n,this.friend=new h.mo,this.friendList=[],this.isFriendshipLoading=!1,this.userId=localStorage.getItem("id"),this.areFriends=!1,this.errorMSG=""}ngOnInit(){this.areFriends=!!this.friendList.includes(this.friend._id)}toggleFriendship(){this.isFriendshipLoading=!0,this._userService.toggleFriendship(this.userId,this.friend._id).subscribe({next:()=>{this.isFriendshipLoading=!1,this.areFriends=!this.areFriends,this.friendList.includes(this.friend._id)?this.friendList.splice(this.friendList.indexOf(this.friend._id),1):this.friendList.push(this.friend._id),localStorage.setItem("friends",JSON.stringify(this.friendList))},error:()=>{this.isFriendshipLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}viewProfile(i){this.router.navigateByUrl(`/profile/${i}`)}}function C(t,i){1&t&&(e.TgZ(0,"div",6),e._uU(1," Loading ...\n"),e.qZA())}function v(t,i){if(1&t&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.errorMSG,"\n")}}function x(t,i){if(1&t&&e._UZ(0,"app-friend",8),2&t){const n=i.$implicit,l=e.oxw();e.Q6J("friendList",l.friendList)("friend",n)}}function M(t,i){if(1&t&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(' no users with name "',n.filteredName,'" found\n')}}f.\u0275fac=function(i){return new(i||f)(e.Y36(p.f),e.Y36(g.F0))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-friend"]],inputs:{friend:"friend",friendList:"friendList"},decls:18,vars:13,consts:[[1,"friend"],[1,"friend-header","text-bg-dark"],[3,"src","alt"],[1,"friend-header-content"],[2,"cursor","pointer",3,"click"],[1,"fas","fa-map-marker-alt","gray"],[1,"friend-header-settings"],[3,"disabled","click"],["class","fa fa-user-alt-slash gray",4,"ngIf"],["class","fa fa-user-plus gray",4,"ngIf"],["class","text-danger text-center",4,"ngIf"],[1,"fa","fa-user-alt-slash","gray"],[1,"fa","fa-user-plus","gray"],[1,"text-danger","text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div"),e._UZ(3,"img",2),e.qZA(),e.TgZ(4,"div",3)(5,"div")(6,"span",4),e.NdJ("click",function(){return n.viewProfile(n.friend._id)}),e._uU(7),e.ALo(8,"titlecase"),e.ALo(9,"titlecase"),e.qZA()(),e.TgZ(10,"div"),e._UZ(11,"i",5),e._uU(12),e.qZA()(),e.TgZ(13,"div",6)(14,"button",7),e.NdJ("click",function(){return n.toggleFriendship()}),e.YNc(15,u,1,0,"i",8),e.YNc(16,_,1,0,"i",9),e.qZA()()(),e.YNc(17,F,2,1,"div",10),e.qZA()),2&i&&(e.xp6(3),e.Q6J("src",n.friend.picture,e.LSH)("alt",n.friend.firstName),e.xp6(4),e.AsE("",e.lcZ(8,9,n.friend.firstName)," ",e.lcZ(9,11,n.friend.lastName),""),e.xp6(5),e.hij(" ",n.friend.location," "),e.xp6(2),e.Q6J("disabled",n.isFriendshipLoading),e.xp6(1),e.Q6J("ngIf",n.areFriends),e.xp6(1),e.Q6J("ngIf",!n.areFriends),e.xp6(1),e.Q6J("ngIf",""!==n.errorMSG))},dependencies:[a.O5,a.rS],styles:[".friend[_ngcontent-%COMP%]{max-width:600px;margin:auto;margin-bottom:1rem}.friend-header[_ngcontent-%COMP%]{display:grid;margin:0 1rem;grid-template-columns:auto 1fr auto;padding:.5rem;border-radius:1rem}.friend-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:1.5rem;margin-right:1rem}.friend-header-content[_ngcontent-%COMP%]{padding-left:.5rem}.friend-header-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{font-size:1.2rem}.friend-header-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{font-size:.8rem}.friend-header-settings[_ngcontent-%COMP%], .comment-settings[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer}.friend-header-settings[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .comment-settings[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0;border:none;padding:0;background:inherit}.friend-header-settings[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem}"]});class c{constructor(i){this._userService=i,this.userId=localStorage.getItem("id"),this.isFriendsLoading=!0,this.isFriendshipLoading=!1,this.friends=[],this.filteredFriends=[],this.filteredName="",this.friendList=[],this.errorMSG=""}ngOnInit(){this.friendList=JSON.parse(localStorage.getItem("friends")),this._userService.getAllUsers().subscribe({next:i=>{this.filteredFriends=i.users.filter(n=>n._id!=this.userId),this.friends=i.users.filter(n=>n._id!=this.userId),this.isFriendsLoading=!1},error:()=>{this.isFriendsLoading=!1,this.errorMSG="Unexpected Error Ocurred",setTimeout(()=>{this.errorMSG=""},3e3)}})}filterUsers(){this.filteredFriends=this.friends.filter(i=>`${i.firstName} ${i.lastName}`.includes(this.filteredName.trim()))}}c.\u0275fac=function(i){return new(i||c)(e.Y36(p.f))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-friends-page"]],decls:7,vars:5,consts:[["autocomplete","off","spellcheck","false"],["type","text","name","filter","placeholder","search users",1,"text-bg-dark",3,"ngModel","ngModelChange","keyup"],["class","container h3 text-center m-auto text-light my-5",4,"ngIf"],["class","container text-center m-auto text-danger my-5",4,"ngIf"],[3,"friendList","friend",4,"ngFor","ngForOf"],["class","container text-light text-center",4,"ngIf"],[1,"container","h3","text-center","m-auto","text-light","my-5"],[1,"container","text-center","m-auto","text-danger","my-5"],[3,"friendList","friend"],[1,"container","text-light","text-center"]],template:function(i,n){1&i&&(e.TgZ(0,"div")(1,"form",0)(2,"input",1),e.NdJ("ngModelChange",function(y){return n.filteredName=y})("keyup",function(){return n.filterUsers()}),e.qZA()()(),e.YNc(3,C,2,0,"div",2),e.YNc(4,v,2,1,"div",3),e.YNc(5,x,1,2,"app-friend",4),e.YNc(6,M,2,1,"div",5)),2&i&&(e.xp6(2),e.Q6J("ngModel",n.filteredName),e.xp6(1),e.Q6J("ngIf",n.isFriendsLoading),e.xp6(1),e.Q6J("ngIf",""!==n.errorMSG),e.xp6(1),e.Q6J("ngForOf",n.filteredFriends),e.xp6(1),e.Q6J("ngIf",0===n.filteredFriends.length&&!1===n.isFriendsLoading))},dependencies:[a.sg,a.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F,f],styles:["div[_ngcontent-%COMP%]{max-width:600px;margin:1rem auto;padding:.5rem}input[_ngcontent-%COMP%]{border-radius:.75rem;padding:.5rem;border:none;width:100%}"]});const L=[{path:"",component:c}];class d{}d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[g.Bz.forChild(L),g.Bz]});var O=r(4466);class o{}o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,d,s.u5,O.m]})}}]);